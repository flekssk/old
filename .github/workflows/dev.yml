name: Deploy to Kubernetes

on:
  push:
    branches:
      - '*dev*'

jobs:
  deploy:
    runs-on: Blue-Yttrium
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Build container image
        run: docker build -f ./.github/workflows/Dockerfile -t frontend . 

      - name: stop container 
        run: |
          sudo -S docker stop frontend | true
          sudo -S docker rm frontend | true

      - name: start container       
        run: sudo -S docker run -d --name=frontend -p 127.0.0.1:3000:5173 frontend
